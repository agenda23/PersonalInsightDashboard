# Twelve Data API 設定ガイド

## 🚨 現在の問題

404エラーが発生しています。これはAPIキーが無効であることを示しています。

```
https://api.twelvedata.com/v1/quote?symbol=USDJPY&apikey=8c0ee3e0b57a4e0c83048716c3707e81
→ 404 Not Found
```

## ✅ 解決手順

### ステップ1: 新しいAPIキーを取得

1. **Twelve Dataにアクセス**
   https://twelvedata.com/

2. **Sign Upをクリック**
   - 右上の「Sign Up」ボタンをクリック

3. **無料アカウントを作成**
   - メールアドレスを入力
   - パスワードを設定
   - 「Create Free Account」をクリック

4. **メール認証**
   - 登録したメールアドレスに認証メールが届く
   - メール内のリンクをクリックして認証

5. **APIキーを取得**
   - ダッシュボードにログイン
   - 「API Key」セクションを探す
   - 新しいAPIキーが表示される
   - コピーボタンでAPIキーをコピー

### ステップ2: ダッシュボードでAPIキーを設定

1. **Personal Insight Dashboardを開く**
   ```bash
   npm run dev
   ```

2. **設定画面へ移動**
   - 右上の「設定」ボタンをクリック

3. **APIキーを入力**
   - 「Twelve Data API キー」の入力欄に新しいAPIキーをペースト
   - 自動的に保存される

4. **ダッシュボードに戻る**
   - 「ダッシュボード」タブをクリック
   - 「更新」ボタンをクリック

5. **データが取得されることを確認**
   - 市場データウィジェットの警告が消える
   - 実際のデータが表示される

## 📊 Twelve Data 無料プランの制限

### 制限内容
- **1日800リクエスト**
- **1分間に8リクエスト**
- **利用可能な市場**:
  - ✅ 株式 (米国のみ)
  - ✅ 暗号資産
  - ✅ Forex（為替） - 一部制限あり
  - ❌ 日本株（有料プラン）
  - ❌ 先物・オプション（有料プラン）

### 無料プランで取得できるデータ
- ✅ USDJPY (米ドル/日本円) - 制限あり
- ✅ BTCUSD (ビットコイン/米ドル)
- ✅ SPX (S&P 500)
- ❌ N225 (日経平均) - 有料プランのみ

## 🔄 代替案

### オプション1: モックデータモードで使用

APIキーを設定せずに使用すると、自動的にモックデータが表示されます。

**メリット**:
- API制限の心配なし
- デモンストレーション用として十分

**デメリット**:
- 実際のデータは取得できない
- データは固定値

### オプション2: 他の無料APIサービスを使用

#### Alpha Vantage API（推奨）
- **無料プラン**: 1日500リクエスト
- **日本株対応**: あり
- **登録**: https://www.alphavantage.co/support/#api-key

#### Yahoo Finance API
- **無料**: はい
- **制限**: 緩い
- **注意**: 非公式API

## ⚠️ トラブルシューティング

### 新しいAPIキーでも404エラーが出る場合

1. **APIキーが正しくコピーされているか確認**
   - 前後にスペースが入っていないか
   - 全体がコピーされているか

2. **ブラウザのキャッシュをクリア**
   ```javascript
   // ブラウザのコンソールで実行
   localStorage.clear()
   location.reload()
   ```

3. **APIキーの有効化を待つ**
   - 新しいキーは即座に有効にならない場合がある
   - 5〜10分待ってから再試行

4. **Twelve Dataのサービス状態を確認**
   https://status.twelvedata.com/

### それでも解決しない場合

**モックデータモードで使用することをおすすめします**:

1. 設定画面でAPIキーを空にする
2. ダッシュボードに戻る
3. モックデータが表示される（警告メッセージ付き）

このモードでもアプリケーションの全機能を試すことができます。

## 📞 サポート

Twelve Dataのサポート:
- Email: support@twelvedata.com
- ドキュメント: https://twelvedata.com/docs

---

**最終更新**: 2025年10月8日

